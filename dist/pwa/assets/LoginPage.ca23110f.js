import{Q as g}from"./QImg.3cf10b4b.js";import{r as l,k as h,m as v,n as w,p as r,z as a,q as s,aP as c,Q as y,t as p}from"./index.30dd2348.js";import{Q as k}from"./QSpinnerGears.3a9ff54e.js";import{Q as x}from"./QForm.550ba64a.js";import{Q as b}from"./QPage.b9e58bdc.js";import{u as Q}from"./use-quasar.67b6ac9a.js";import{u as q}from"./auth-store.2c60703d.js";import"./axios.66ae61ea.js";const V={class:"col-md-6 text-center"},B={class:"col-md-5"},P=a("div",{class:"text-h5 q-mx-lg"},"Belanja kebutuhan utama, menjadi lebih mudah",-1),S={class:"row justify-center"},E={class:"q-my-sm"},j=a("label",{for:"email"},"Email",-1),I={class:"q-my-sm"},N=a("label",{for:"password"},"Password",-1),z={class:"q-mt-sm text-center",style:{"font-size":"12px"}},A={class:"text-bold cursor-pointer"},H={__name:"LoginPage",setup(C){const m=Q(),i=l(""),n=l(""),u=l({email:[e=>!!e||"Email harus diisi",e=>/.+@.+/.test(e)||"Email tidak valid"],password:[e=>!!e||"Password harus diisi",e=>e.length>=8||"Password minimal 8 karakter"]}),o=l(!1),_=async()=>{o.value=!0;try{const e=await q().login(i.value,n.value);localStorage.setItem("token",e.data.data.token),localStorage.setItem("role",e.data.data.user.role),m.notify({message:"Login Berhasil",icon:"check",color:"positive"}),window.location.reload()}catch(e){console.error("Error submitting form:",e),m.notify({message:e.response.data.message||"Format Email dan Password masih salah",icon:"warning",color:"negative"})}o.value=!1};return(e,t)=>{const f=h("router-link");return v(),w(b,{class:"row justify-center items-center self-center q-my-xl"},{default:r(()=>[a("div",V,[s(g,{src:"/img/login-placeholder.png",alt:"",class:"q-mb-md",style:{width:"500px"}})]),a("div",B,[P,a("div",S,[s(x,{onSubmit:_,class:"col-9"},{default:r(()=>[a("div",E,[j,s(c,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=d=>i.value=d),type:"email",id:"email",rules:u.value.email,outlined:"",dense:""},null,8,["modelValue","rules"])]),a("div",I,[N,s(c,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=d=>n.value=d),type:"password",id:"password",rules:u.value.password,outlined:"",dense:""},null,8,["modelValue","rules"])]),s(y,{type:"submit",color:"primary",label:"Masuk ke Akun Saya",class:"full-width q-mt-sm",loading:o.value,disable:o.value,"no-caps":""},{loading:r(()=>[s(k)]),_:1},8,["loading","disable"]),a("div",z,[a("div",A,[p(" Belum mempunyai akun? "),s(f,{to:{name:"register"},class:"link text-primary"},{default:r(()=>[p("Daftar")]),_:1})])])]),_:1})])])]),_:1})}}};export{H as default};
