import{r as c,w as K,d as M,m as b,x as w,q as e,p as a,aU as T,a$ as U,A as P,Q as m,C as I,z as t,v as S,aP as N,b0 as W,u as ee,j as ae,n as z,bu as le,t as Q,D as _,O as G,b1 as A,aE as te,aD as oe,bo as se,s as ne}from"./index.30dd2348.js";import{Q as B}from"./QTooltip.3ed074ee.js";import{a as C,Q as re}from"./QTable.2f8322cd.js";import{Q as j}from"./QItemLabel.580fc480.js";import{Q as ie,a as O}from"./QItem.2b7551f8.js";import{Q as de}from"./QList.f7f71f64.js";import{Q as ue}from"./QPage.b9e58bdc.js";import{u as F}from"./use-quasar.67b6ac9a.js";import{url as R}from"./axios.66ae61ea.js";import{u as D}from"./promotion-store.a725c3c9.js";import{Q as J}from"./QSpace.005ac978.js";import{Q as X}from"./QUploader.aad48199.js";import{Q as ce}from"./QSpinnerGears.3a9ff54e.js";import{Q as Y}from"./QForm.550ba64a.js";import{C as E}from"./ClosePopup.b6be3405.js";import{Q as me}from"./QSpinnerHourglass.0262d2ae.js";import"./QMenu.19c3a5ff.js";import"./selection.64adb4fb.js";import"./QSelect.68da1b0a.js";import"./rtl.276c3f1b.js";import"./format.b9446fb2.js";import"./use-fullscreen.13a86615.js";const fe=t("div",{class:"text-h6"},"Tambah Promosi",-1),pe={class:"row justify-center"},be={class:"col-10 q-ma-sm"},ve=t("div",{class:"text-bold"},"Spanduk :",-1),ge={class:"col-10 q-ma-sm"},_e=t("div",{class:"text-bold"},"URL :",-1),he={__name:"CreatePromotion",emits:["added"],setup(L,{emit:h}){const y=F(),v=h,u=c({banner:"",url:""}),n=c({});K(n,r=>{u.value.banner=r});const q=r=>{u.value.banner=r[0]},x=c({banner:[r=>!!r||"Spanduk harus diisi"],url:[r=>!!r||"URL harus diisi"]}),p=c(!1),g=M(()=>p.value||!u.value.url||!u.value.banner),V=async()=>{p.value=!0;try{await D().create(u.value),y.notify({message:"Promosi berhasil dibuat",icon:"check",color:"positive"}),v("added")}catch(r){console.error("Error submitting form:",r),y.notify({message:r.response.data.message||"Promosi gagal dibuat, Silahkan coba lagi nanti",icon:"warning",color:"negative"})}p.value=!1};return(r,o)=>(b(),w("div",null,[e(Y,{onSubmit:V},{default:a(()=>[e(T,{style:{"min-width":"400px"}},{default:a(()=>[e(U,{class:"row items-center q-py-sm"},{default:a(()=>[fe,e(J),P(e(m,{icon:"close",flat:"",round:"",dense:""},null,512),[[E]])]),_:1}),e(I),e(U,{class:"scroll",style:{"max-height":"77vh"}},{default:a(()=>[t("div",pe,[t("div",be,[ve,e(X,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=i=>n.value=i),url:S(R),label:"Spanduk",style:{width:"100%",height:"300px"},onAdded:q,rules:x.value.banner},null,8,["modelValue","url","rules"])]),t("div",ge,[_e,e(N,{type:"url",modelValue:u.value.url,"onUpdate:modelValue":o[1]||(o[1]=i=>u.value.url=i),label:"URL",class:"q-my-xs",rules:x.value.url,dense:"",outlined:"",required:"",autofocus:""},null,8,["modelValue","rules"])])])]),_:1}),e(I),e(W,{align:"right",class:"text-primary"},{default:a(()=>[P(e(m,{label:"Batal",color:"primary",flat:""},null,512),[[E]]),e(m,{type:"submit",label:"Tambah",color:"primary",loading:p.value,disable:g.value},{loading:a(()=>[e(ce)]),_:1},8,["loading","disable"])]),_:1})]),_:1})]),_:1})]))}},ye=t("div",{class:"text-h6"},"Edit Promosi",-1),xe={class:"row justify-center"},we={class:"col-10 q-ma-sm"},ke=t("div",{class:"text-bold"},"Ganti Spanduk :",-1),Qe={class:"col-10 q-ma-sm"},qe=t("div",{class:"text-bold"},"URL :",-1),H={__name:"EditPromotion",props:["item"],emits:["edited"],setup(L,{emit:h}){const y=F(),{item:v}=L,u=h,n=c({id:v.id,banner:v.banner,url:v.url}),q=c({});K(q,o=>{n.value.banner=o});const x=o=>{n.value.banner=o[0]},p=c({banner:[o=>!!o||"Spanduk harus diisi"],url:[o=>!!o||"URL harus diisi"]}),g=c(!1),V=M(()=>g.value||!n.value.url||!n.value.banner),r=async()=>{g.value=!0;try{await D().edit(n.value),y.notify({message:"Promosi berhasil diedit",icon:"check",color:"positive"}),u("edited")}catch(o){console.error("Error submitting form:",o),y.notify({message:o.response.data.message||"Promosi gagal diedit, Silahkan coba lagi nanti",icon:"warning",color:"negative"})}g.value=!1};return(o,i)=>(b(),w("div",null,[e(Y,{onSubmit:r},{default:a(()=>[e(T,{style:{"min-width":"400px"}},{default:a(()=>[e(U,{class:"row items-center q-py-sm"},{default:a(()=>[ye,e(J),P(e(m,{icon:"close",flat:"",round:"",dense:""},null,512),[[E]])]),_:1}),e(I),e(U,{class:"scroll",style:{"max-height":"77vh"}},{default:a(()=>[t("div",xe,[t("div",we,[ke,e(X,{modelValue:n.value.banner,"onUpdate:modelValue":i[0]||(i[0]=k=>n.value.banner=k),label:"Ganti Spanduk",style:{width:"100%",height:"200px"},onAdded:x,rules:p.value.banner},null,8,["modelValue","rules"])]),t("div",Qe,[qe,e(N,{type:"url",modelValue:n.value.url,"onUpdate:modelValue":i[1]||(i[1]=k=>n.value.url=k),label:"URL",class:"q-my-xs",rules:p.value.url,dense:"",outlined:"",required:"",autofocus:""},null,8,["modelValue","rules"])])])]),_:1}),e(I),e(W,{align:"right",class:"text-primary"},{default:a(()=>[P(e(m,{label:"Batal",color:"primary",flat:""},null,512),[[E]]),e(m,{type:"submit",label:"Edit",color:"primary",loading:g.value,disable:V.value},{loading:a(()=>[e(me,{class:"on-center"})]),_:1},8,["loading","disable"])]),_:1})]),_:1})]),_:1})]))}},Ve=t("div",{class:"text-h5 q-pr-lg"},"Promosi",-1),$e={class:"text-body2 text-bold text-center q-pa-md"},Ce={dense:"",square:""},Se={dense:"",square:""},Ue=["src"],Pe={dense:"",square:""},Ie=["href"],De={key:0,dense:"",square:""},Ee={key:1,dense:"",square:""},Le=["src"],ze={key:2,dense:"",square:""},Ae=["href"],Be={key:3},ra={__name:"IndexPromotion",setup(L){const h=F(),y=ee(),v=c([]),u=async()=>{try{const f=await D().dashboard();v.value=f.data.data}catch(f){console.error("Error fetching data:",f),f.response.data.status==="failed"&&y.push("/notfound")}};ae(()=>{u()});const n=c(!1),q=()=>{n.value=!1,u()},x=f=>{f.editItemDialog=!1,u()},p=f=>{h.dialog({title:"WARNING!!!",message:"Apakah Anda yakin ingin menghapus data ini?",cancel:!0,persistent:!0}).onOk(async()=>{try{await D().delete(f.id),h.notify({message:"Promosi berhasil dihapus",icon:"check",color:"positive"}),u()}catch(d){console.error("Error submitting form:",d),h.notify({message:d.response.data.message||"Promosi gagal dihapus",icon:"warning",color:"negative"})}})},g=v,V=[{name:"id",field:"id",label:"No",headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"banner",field:"banner",label:"Spanduk",align:"center",sortable:!1,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"url",field:"url",label:"URL",align:"left",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"action",field:"action",label:"Aksi",align:"center",headerStyle:"font-weight: bolder; font-size: 13px;"}],r=c("horizontal"),o=c(""),i=c(!1),k=c({}),Z=f=>{f.toggleFullscreen()};return(f,d)=>(b(),z(ue,{class:"q-pa-sm"},{default:a(()=>[e(re,{class:"dashboard-table","table-header-class":"bg-grey-2",title:"Promosi","row-key":"__index",rows:S(g),columns:V,"hide-header":i.value,grid:i.value,filter:o.value,pagination:k.value,"onUpdate:pagination":d[5]||(d[5]=l=>k.value=l),"rows-per-page-options":[10,20,30],separator:r.value,"virtual-scroll":"",flat:"",bordered:""},{"top-right":a(l=>[e(le,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=s=>r.value=s),size:"xs",options:[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"},{label:"Cell",value:"cell"},{label:"None",value:"none"}],class:"q-mx-md",inline:""},null,8,["modelValue"]),e(m,{color:"primary",icon:l.inFullscreen?"fullscreen_exit":"fullscreen",onClick:s=>Z(l),flat:"",round:"",dense:""},{default:a(()=>[e(B,null,{default:a(()=>[Q(_(l.inFullscreen?"Keluar Layar Penuh":"Beralih ke Layar Penuh"),1)]),_:2},1024)]),_:2},1032,["icon","onClick"]),e(m,{color:"primary",icon:i.value?"list":"grid_on",onClick:d[1]||(d[1]=s=>i.value=!i.value),class:"q-mr-sm",flat:"",round:"",dense:""},{default:a(()=>[e(B,null,{default:a(()=>[Q(_(i.value?"List":"Grid"),1)]),_:1})]),_:1},8,["icon"]),e(N,{outlined:"",dense:"",debounce:"300",modelValue:o.value,"onUpdate:modelValue":d[2]||(d[2]=s=>o.value=s),placeholder:"Cari..."},{append:a(()=>[e(G,{name:"search"})]),_:1},8,["modelValue"])]),"top-left":a(()=>[Ve,e(m,{color:"primary",icon:"add",class:"shadow-3 q-my-sm",onClick:d[3]||(d[3]=l=>n.value=!0),dense:""},{default:a(()=>[e(B,null,{default:a(()=>[Q("Tambah Promosi")]),_:1})]),_:1}),e(A,{modelValue:n.value,"onUpdate:modelValue":d[4]||(d[4]=l=>n.value=l),persistent:""},{default:a(()=>[e(he,{onAdded:q})]),_:1},8,["modelValue"])]),"no-data":a(()=>[t("div",$e,[e(G,{name:"warning_amber",size:"25px",class:"q-mx-sm"}),Q(" Tidak ada data yang tersedia. ")])]),"body-cell-id":a(l=>[e(C,{props:l},{default:a(()=>[t("div",Ce,_(l.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-banner":a(l=>[e(C,{props:l},{default:a(()=>[t("div",Se,[t("img",{src:S(R)+"/public/promotions/"+l.row.banner,class:"products-image cursor-pointer",style:{"border-radius":"10px"}},null,8,Ue)])]),_:2},1032,["props"])]),"body-cell-url":a(l=>[e(C,{props:l},{default:a(()=>[t("div",Pe,[t("a",{href:l.row.url,target:"_blank",rel:"noopener noreferrer",class:"link text-primary"},_(l.row.url),9,Ie)])]),_:2},1032,["props"])]),"body-cell-action":a(l=>[e(C,{props:l},{default:a(()=>[e(m,{color:"warning",field:"edit",icon:"edit",class:"q-mx-xs",onClick:s=>l.row.editItemDialog=!0,dense:"",round:""},{default:a(()=>[e(A,{modelValue:l.row.editItemDialog,"onUpdate:modelValue":s=>l.row.editItemDialog=s,persistent:""},{default:a(()=>[e(H,{onEdited:s=>x(l.row),item:l.row},null,8,["onEdited","item"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["onClick"]),e(m,{color:"red",field:"delete",icon:"delete",class:"q-mx-xs",onClick:s=>p(l.row),dense:"",round:""},null,8,["onClick"])]),_:2},1032,["props"])]),item:a(l=>[t("div",{class:"q-pa-md col-xs-12 col-sm-6 col-md-6 col-lg-6 grid-style-transition",style:se(l.selected?"transform: scale(0.95);":"")},[e(T,{class:"q-pa-md"},{default:a(()=>[e(de,{dense:""},{default:a(()=>[(b(!0),w(oe,null,te(l.cols,s=>(b(),z(ie,{key:s.id},{default:a(()=>[e(O,null,{default:a(()=>[e(j,null,{default:a(()=>[Q(_(s.label),1)]),_:2},1024)]),_:2},1024),e(O,{side:""},{default:a(()=>[s.name==="id"?(b(),w("div",De,_(l.rowIndex+1),1)):s.name==="banner"?(b(),w("div",Ee,[t("img",{src:S(R)+"/public/promotions/"+l.row.banner,class:"products-image cursor-pointer",style:{"border-radius":"10px"}},null,8,Le)])):s.name==="url"?(b(),w("div",ze,[t("a",{href:l.row.url,target:"_blank",rel:"noopener noreferrer",class:"link text-primary"},_(l.row.url),9,Ae)])):s.name==="action"?(b(),w("div",Be,[e(m,{color:"warning",field:"edit",icon:"edit",class:"q-mx-xs",onClick:$=>l.row.editItemDialog=!0,dense:"",round:""},{default:a(()=>[e(A,{modelValue:l.row.editItemDialog,"onUpdate:modelValue":$=>l.row.editItemDialog=$,persistent:""},{default:a(()=>[e(H,{onEdited:$=>x(l.row),item:l.row},null,8,["onEdited","item"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["onClick"]),e(m,{color:"red",field:"delete",icon:"delete",class:"q-mx-xs",onClick:$=>p(l.row),dense:"",round:""},null,8,["onClick"])])):(b(),z(j,{key:4,caption:"",class:ne(s.classes?s.classes:"")},{default:a(()=>[Q(_(s.value),1)]),_:2},1032,["class"]))]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)],4)]),_:1},8,["rows","hide-header","grid","filter","pagination","separator"])]),_:1}))}};export{ra as default};
