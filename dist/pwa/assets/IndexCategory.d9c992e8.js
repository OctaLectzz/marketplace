import{r as u,j as B,d as O,m as v,x as C,q as e,p as a,aU as F,a$ as N,A as z,Q as m,C as D,z as l,aP as I,O as Q,b0 as H,t as h,u as X,n as A,bu as Y,D as q,b1 as U,aE as Z,aD as ee,bo as ae,v as te,s as oe}from"./index.30dd2348.js";import{Q as L}from"./QTooltip.3ed074ee.js";import{a as T,Q as le}from"./QTable.2f8322cd.js";import{Q as P}from"./QItemLabel.580fc480.js";import{Q as se,a as G}from"./QItem.2b7551f8.js";import{Q as ne}from"./QList.f7f71f64.js";import{Q as ie}from"./QPage.b9e58bdc.js";import{u as M}from"./use-quasar.67b6ac9a.js";import{u as V}from"./category-store.917ac677.js";import{Q as R}from"./QSpace.005ac978.js";import{Q as re}from"./QSpinnerGears.3a9ff54e.js";import{Q as W}from"./QForm.550ba64a.js";import{C as E}from"./ClosePopup.b6be3405.js";import{Q as de}from"./QSpinnerHourglass.0262d2ae.js";import"./QMenu.19c3a5ff.js";import"./selection.64adb4fb.js";import"./QSelect.68da1b0a.js";import"./rtl.276c3f1b.js";import"./format.b9446fb2.js";import"./use-fullscreen.13a86615.js";import"./axios.66ae61ea.js";const ce=l("div",{class:"text-h6"},"Tambah Kategori",-1),ue={class:"row justify-center"},me={class:"col-10 q-ma-sm"},ge=l("div",{class:"text-bold"},"Nama :",-1),fe={class:"col-10 q-ma-sm"},pe=l("div",{class:"text-bold"},"Ikon :",-1),ve={class:"row"},_e={class:"col-3"},he={class:"col-9 self-center"},ye=l("div",{class:"text-grey-6"},[h(" CATATAN : Kamu dapat mencari ikon di "),l("a",{href:"https://fonts.google.com/icons?icon.set=Material+Icons",target:"_blank",rel:"noopener noreferrer",class:"link text-primary"}," https://fonts.google.com/icons?icon.set=Material+Icons ")],-1),be={__name:"CreateCategory",emits:["added"],setup(K,{emit:y}){const b=M(),p=y,d=u({name:"",icon:""}),r=u([]),x=async()=>{try{const s=await V().all();r.value=s.data.data}catch(s){console.error("Error fetching data:",s)}};B(()=>{x()});const w=u({name:[s=>!!s||"Nama harus diisi",s=>s.length<=50||"Nama maksimal 50 karakter",s=>typeof s=="string"&&r.value?!r.value.some(o=>o.name.toLowerCase()===s.toLowerCase())||"Kategori sudah ada":!0],icon:[s=>!!s||"Ikon harus diisi"]}),f=u(!1),_=O(()=>f.value||!d.value.name||!d.value.icon),$=async()=>{f.value=!0;try{await V().create(d.value),b.notify({message:"Kategori berhasil dibuat",icon:"check",color:"positive"}),p("added")}catch(s){console.error("Error submitting form:",s),b.notify({message:s.response.data.message||"Kategori gagal dibuat, Silahkan coba lagi nanti",icon:"warning",color:"negative"})}f.value=!1};return(s,o)=>(v(),C("div",null,[e(W,{onSubmit:$},{default:a(()=>[e(F,{style:{"min-width":"400px"}},{default:a(()=>[e(N,{class:"row items-center q-py-sm"},{default:a(()=>[ce,e(R),z(e(m,{icon:"close",flat:"",round:"",dense:""},null,512),[[E]])]),_:1}),e(D),e(N,{class:"scroll",style:{"max-height":"77vh"}},{default:a(()=>[l("div",ue,[l("div",me,[ge,e(I,{modelValue:d.value.name,"onUpdate:modelValue":o[0]||(o[0]=i=>d.value.name=i),label:"Nama",class:"q-my-xs",rules:w.value.name,dense:"",outlined:"",required:"",autofocus:""},null,8,["modelValue","rules"])]),l("div",fe,[pe,l("div",ve,[l("div",_e,[e(Q,{name:d.value.icon,size:"30px",class:"bg-grey-4 q-pa-md q-ma-sm",style:{"border-radius":"50%"}},null,8,["name"])]),l("div",he,[e(I,{modelValue:d.value.icon,"onUpdate:modelValue":o[1]||(o[1]=i=>d.value.icon=i),label:"Ikon",class:"q-my-xs",rules:w.value.icon,dense:"",outlined:"",required:""},null,8,["modelValue","rules"])])]),ye])])]),_:1}),e(D),e(H,{align:"right",class:"text-primary"},{default:a(()=>[z(e(m,{label:"Batal",color:"primary",flat:""},null,512),[[E]]),e(m,{type:"submit",label:"Tambah",color:"primary",loading:f.value,disable:_.value},{loading:a(()=>[e(re)]),_:1},8,["loading","disable"])]),_:1})]),_:1})]),_:1})]))}},xe=l("div",{class:"text-h6"},"Edit Kategori",-1),we={class:"row justify-center"},ke={class:"col-10 q-ma-sm"},qe=l("div",{class:"text-bold"},"Nama :",-1),Ce={class:"col-10 q-ma-sm"},Qe=l("div",{class:"text-bold"},"Ikon :",-1),Ve={class:"row"},$e={class:"col-3"},Ie={class:"col-9 self-center"},Se=l("div",{class:"text-grey-6"},[h(" CATATAN : Kamu dapat mencari ikon di "),l("a",{href:"https://fonts.google.com/icons?icon.set=Material+Icons",target:"_blank",rel:"noopener noreferrer",class:"link text-primary"}," https://fonts.google.com/icons?icon.set=Material+Icons ")],-1),j={__name:"EditCategory",props:["item"],emits:["edited"],setup(K,{emit:y}){const b=M(),{item:p}=K,d=y,r=u({id:p.id,name:p.name,icon:p.icon}),x=u([]),w=async()=>{try{const o=await V().all();x.value=o.data.data}catch(o){console.error("Error fetching data:",o)}};B(()=>{w()});const f=u({name:[o=>!!o||"Nama harus diisi",o=>o.length<=50||"Nama maksimal 50 karakter",o=>typeof o=="string"&&x.value?!x.value.some(i=>i.name.toLowerCase()===o.toLowerCase()&&i.name.toLowerCase()!==p.name.toLowerCase())||"Kategori sudah ada":!0],icon:[o=>!!o||"Ikon harus diisi"]}),_=u(!1),$=O(()=>_.value||!r.value.name||!r.value.icon),s=async()=>{_.value=!0;try{await V().edit(r.value),b.notify({message:"Kategori berhasil diedit",icon:"check",color:"positive"}),d("edited")}catch(o){console.error("Error submitting form:",o),b.notify({message:o.response.data.message||"Kategori gagal diedit, Silahkan coba lagi nanti",icon:"warning",color:"negative"})}_.value=!1};return(o,i)=>(v(),C("div",null,[e(W,{onSubmit:s},{default:a(()=>[e(F,{style:{"min-width":"400px"}},{default:a(()=>[e(N,{class:"row items-center q-py-sm"},{default:a(()=>[xe,e(R),z(e(m,{icon:"close",flat:"",round:"",dense:""},null,512),[[E]])]),_:1}),e(D),e(N,{class:"scroll",style:{"max-height":"77vh"}},{default:a(()=>[l("div",we,[l("div",ke,[qe,e(I,{modelValue:r.value.name,"onUpdate:modelValue":i[0]||(i[0]=k=>r.value.name=k),label:"Nama",class:"q-my-xs",rules:f.value.name,dense:"",outlined:"",required:"",autofocus:""},null,8,["modelValue","rules"])]),l("div",Ce,[Qe,l("div",Ve,[l("div",$e,[e(Q,{name:r.value.icon,size:"30px",class:"bg-grey-4 q-pa-md q-ma-sm",style:{"border-radius":"50%"}},null,8,["name"])]),l("div",Ie,[e(I,{modelValue:r.value.icon,"onUpdate:modelValue":i[1]||(i[1]=k=>r.value.icon=k),label:"Ikon",class:"q-my-xs",rules:f.value.icon,dense:"",outlined:"",required:""},null,8,["modelValue","rules"])])]),Se])])]),_:1}),e(D),e(H,{align:"right",class:"text-primary"},{default:a(()=>[z(e(m,{label:"Batal",color:"primary",flat:""},null,512),[[E]]),e(m,{type:"submit",label:"Edit",color:"primary",loading:_.value,disable:$.value},{loading:a(()=>[e(de,{class:"on-center"})]),_:1},8,["loading","disable"])]),_:1})]),_:1})]),_:1})]))}},Ne=l("div",{class:"text-h5 q-pr-lg"},"Kategori",-1),ze={class:"text-body2 text-bold text-center q-pa-md"},De={dense:"",square:""},Ee={dense:"",square:""},Ke={key:0,dense:"",square:""},Ae={key:1,dense:"",square:""},Ue={key:2},sa={__name:"IndexCategory",setup(K){const y=M(),b=X(),p=u([]),d=async()=>{try{const g=await V().dashboard();p.value=g.data.data}catch(g){console.error("Error fetching data:",g),g.response.data.status==="failed"&&b.push("/notfound")}};B(()=>{d()});const r=u(!1),x=()=>{r.value=!1,d()},w=g=>{g.editItemDialog=!1,d()},f=g=>{y.dialog({title:"WARNING!!!",message:"Apakah Anda yakin ingin menghapus data ini?",cancel:!0,persistent:!0}).onOk(async()=>{try{await V().delete(g.id),y.notify({message:"Kategori berhasil dihapus",icon:"check",color:"positive"}),d()}catch(c){console.error("Error submitting form:",c),y.notify({message:c.response.data.message||"Kategori gagal dihapus",icon:"warning",color:"negative"})}})},_=p,$=[{name:"id",field:"id",label:"No",headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"icon",field:"icon",label:"Ikon",align:"center",sortable:!1,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"name",field:"name",label:"Nama",align:"left",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"slug",field:"slug",label:"Slug",align:"left",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"action",field:"action",label:"Aksi",align:"center",headerStyle:"font-weight: bolder; font-size: 13px;"}],s=u("horizontal"),o=u(""),i=u(!1),k=u({}),J=g=>{g.toggleFullscreen()};return(g,c)=>(v(),A(ie,{class:"q-pa-sm"},{default:a(()=>[e(le,{class:"dashboard-table","table-header-class":"bg-grey-2",title:"Kategori","row-key":"__index",rows:te(_),columns:$,"hide-header":i.value,grid:i.value,filter:o.value,pagination:k.value,"onUpdate:pagination":c[5]||(c[5]=t=>k.value=t),"rows-per-page-options":[10,20,30],separator:s.value,"virtual-scroll":"",flat:"",bordered:""},{"top-right":a(t=>[e(Y,{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=n=>s.value=n),size:"xs",options:[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"},{label:"Cell",value:"cell"},{label:"None",value:"none"}],class:"q-mx-md",inline:""},null,8,["modelValue"]),e(m,{color:"primary",icon:t.inFullscreen?"fullscreen_exit":"fullscreen",onClick:n=>J(t),flat:"",round:"",dense:""},{default:a(()=>[e(L,null,{default:a(()=>[h(q(t.inFullscreen?"Keluar Layar Penuh":"Beralih ke Layar Penuh"),1)]),_:2},1024)]),_:2},1032,["icon","onClick"]),e(m,{color:"primary",icon:i.value?"list":"grid_on",onClick:c[1]||(c[1]=n=>i.value=!i.value),class:"q-mr-sm",flat:"",round:"",dense:""},{default:a(()=>[e(L,null,{default:a(()=>[h(q(i.value?"List":"Grid"),1)]),_:1})]),_:1},8,["icon"]),e(I,{outlined:"",dense:"",debounce:"300",modelValue:o.value,"onUpdate:modelValue":c[2]||(c[2]=n=>o.value=n),placeholder:"Cari..."},{append:a(()=>[e(Q,{name:"search"})]),_:1},8,["modelValue"])]),"top-left":a(()=>[Ne,e(m,{color:"primary",icon:"add",class:"shadow-3 q-my-sm",onClick:c[3]||(c[3]=t=>r.value=!0),dense:""},{default:a(()=>[e(L,null,{default:a(()=>[h("Tambah Kategori")]),_:1})]),_:1}),e(U,{modelValue:r.value,"onUpdate:modelValue":c[4]||(c[4]=t=>r.value=t),persistent:""},{default:a(()=>[e(be,{onAdded:x})]),_:1},8,["modelValue"])]),"no-data":a(()=>[l("div",ze,[e(Q,{name:"warning_amber",size:"25px",class:"q-mx-sm"}),h(" Tidak ada data yang tersedia. ")])]),"body-cell-id":a(t=>[e(T,{props:t},{default:a(()=>[l("div",De,q(t.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-icon":a(t=>[e(T,{props:t},{default:a(()=>[l("div",Ee,[e(Q,{name:t.row.icon,size:"30px",class:"bg-grey-4 q-pa-md q-my-sm",style:{"border-radius":"50%"}},null,8,["name"])])]),_:2},1032,["props"])]),"body-cell-action":a(t=>[e(T,{props:t},{default:a(()=>[e(m,{color:"warning",field:"edit",icon:"edit",class:"q-mx-xs",onClick:n=>t.row.editItemDialog=!0,dense:"",round:""},{default:a(()=>[e(U,{modelValue:t.row.editItemDialog,"onUpdate:modelValue":n=>t.row.editItemDialog=n,persistent:""},{default:a(()=>[e(j,{onEdited:n=>w(t.row),item:t.row},null,8,["onEdited","item"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["onClick"]),e(m,{color:"red",field:"delete",icon:"delete",class:"q-mx-xs",onClick:n=>f(t.row),dense:"",round:""},null,8,["onClick"])]),_:2},1032,["props"])]),item:a(t=>[l("div",{class:"q-pa-md col-xs-12 col-sm-6 col-md-6 col-lg-6 grid-style-transition",style:ae(t.selected?"transform: scale(0.95);":"")},[e(F,{class:"q-pa-md"},{default:a(()=>[e(ne,{dense:""},{default:a(()=>[(v(!0),C(ee,null,Z(t.cols,n=>(v(),A(se,{key:n.id},{default:a(()=>[e(G,null,{default:a(()=>[e(P,null,{default:a(()=>[h(q(n.label),1)]),_:2},1024)]),_:2},1024),e(G,{side:""},{default:a(()=>[n.name==="id"?(v(),C("div",Ke,q(t.rowIndex+1),1)):n.name==="icon"?(v(),C("div",Ae,[e(Q,{name:t.row.icon,size:"30px",class:"bg-grey-4 q-pa-md q-my-sm",style:{"border-radius":"50%"}},null,8,["name"])])):n.name==="action"?(v(),C("div",Ue,[e(m,{color:"warning",field:"edit",icon:"edit",class:"q-mx-xs",onClick:S=>t.row.editItemDialog=!0,dense:"",round:""},{default:a(()=>[e(U,{modelValue:t.row.editItemDialog,"onUpdate:modelValue":S=>t.row.editItemDialog=S,persistent:""},{default:a(()=>[e(j,{onEdited:S=>w(t.row),item:t.row},null,8,["onEdited","item"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["onClick"]),e(m,{color:"red",field:"delete",icon:"delete",class:"q-mx-xs",onClick:S=>f(t.row),dense:"",round:""},null,8,["onClick"])])):(v(),A(P,{key:3,caption:"",class:oe(n.classes?n.classes:"")},{default:a(()=>[h(q(n.value),1)]),_:2},1032,["class"]))]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)],4)]),_:1},8,["rows","hide-header","grid","filter","pagination","separator"])]),_:1}))}};export{sa as default};
