import{Q as v}from"./QSkeleton.01e1d850.js";import{Q as w}from"./QPage.b9e58bdc.js";import{a as $,Q as E}from"./QCarousel.0d312bba.js";import{c as F,d as b,f as M,F as R,aR as U,r as d,aS as Q,k as z,m,n as g,p as c,z as t,q as s,Q as f,x as C,aE as A,aD as J,D as x,O as L,A as G,aT as H,v as S,t as k,aU as K}from"./index.30dd2348.js";import{Q as O}from"./QSpinnerGears.3a9ff54e.js";import{u as W}from"./use-quasar.67b6ac9a.js";import{url as X,token as Y}from"./axios.66ae61ea.js";import{u as Z}from"./product-store.67bd715d.js";import{u as ee}from"./cart-store.978c541a.js";import"./touch.9135741d.js";import"./selection.64adb4fb.js";import"./use-fullscreen.13a86615.js";var te=F({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:i=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(i)},offset:{type:Array,default:()=>[18,18],validator:i=>i.length===2}},setup(i,{slots:u}){const h=b(()=>`q-carousel__control absolute absolute-${i.position}`),p=b(()=>({margin:`${i.offset[1]}px ${i.offset[0]}px`}));return()=>M("div",{class:h.value,style:p.value},R(u.default))}});const se={class:"row justify-between"},ae={class:"col-md-8 col-xs-12 q-mx-sm"},oe={class:"q-my-sm"},le={class:"col-md-3 col-xs-12 q-mx-sm q-my-xl"},ne={class:"row justify-between"},ie={class:"col-md-8 col-xs-12 q-mx-sm"},re={class:"q-my-sm"},ce={class:"text-h4 text-bold",style:{"letter-spacing":"0.01px"}},ue={class:"text-h6 text-bold q-mb-md",style:{color:"#ff7158"}},de=["innerHTML"],me=t("div",{class:"text-body1 text-bold"},"Atur Jumlah Pesanan",-1),pe={class:"text-subtitle2 q-mb-md"},ve={class:"row items-center justify-between q-my-sm"},fe={class:"col-md-2 col-sm-1 col-xs-2 q-mx-sm"},he={class:"col-md-2 col-xs-2"},ye={class:"col-md-2 col-xs-2"},ge=["max"],xe={class:"col-md-2 col-xs-2"},_e={key:1,class:"q-my-lg"},ke={class:"text-body1 float-right text-bold"},be=t("div",{class:"text-body1"},"Subtotal",-1),Pe={__name:"ShowProductPage",setup(i){const u=W(),h=U(),p=d(!0),_=d(null),r=d(!1),a=d({}),D=async l=>{p.value=!0;try{const e=await Z().show(l);a.value=e.data.data,o.value.product_id=e.data.data.id,a.value.photos&&a.value.photos.length&&(_.value=a.value.photos[0].id)}catch(e){console.error("Error fetching data:",e)}p.value=!1};Q(()=>{h.name=="home.showproduct"&&D(h.params.slug)});const q=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),j=l=>l?l.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>"):"",I=b(()=>a.value.price*o.value.quantity),o=d({product_id:null,quantity:1}),y=d(!1),T=()=>{o.value.quantity<a.value.stock?o.value.quantity++:u.notify({message:"Jumlah pesanan tidak boleh melebihi stok",icon:"warning",color:"negative"})},V=l=>{let e=parseInt(l.target.value);isNaN(e)||e<1?e=1:e>a.value.stock&&(e=a.value.stock,u.notify({message:"Jumlah pesanan tidak boleh melebihi stok",icon:"warning",color:"negative"})),o.value.quantity=e},B=()=>{o.value.quantity>1&&o.value.quantity--};Q(()=>{o.value.quantity<1&&(o.value.quantity=1)});const N=async()=>{y.value=!0;try{await ee().create(o.value),u.notify({message:"Berhasil memasukkan produk ke keranjang",icon:"check",color:"positive"})}catch(l){console.error("Error submitting form:",l),u.notify({message:l.response.data.message||"Gagal memasukkan produk ke keranjang",icon:"warning",color:"negative"})}y.value=!1};return(l,e)=>{const P=z("router-link");return p.value?(m(),g(w,{key:0,class:"q-py-lg"},{default:c(()=>[t("div",se,[t("div",ae,[s(v,{width:"100%",height:"400px"}),t("div",oe,[s(v,{width:"70%",height:"50px",class:"q-my-xs"}),s(v,{width:"30%",class:"q-my-xs"}),s(v,{width:"100%",height:"500px",class:"q-my-lg"})])]),t("div",le,[s(v,{width:"270px",height:"300px",class:"q-my-lg"})])])]),_:1})):(m(),g(w,{key:1,class:"q-py-lg"},{default:c(()=>[t("div",ne,[t("div",ie,[s($,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=n=>_.value=n),fullscreen:r.value,"onUpdate:fullscreen":e[3]||(e[3]=n=>r.value=n),class:"carousel-products",infinite:"",navigation:"",swipeable:"",animated:"",arrows:""},{control:c(()=>[s(te,{position:"bottom-right",offset:[18,18]},{default:c(()=>[s(f,{color:"primary","text-color":"white",icon:r.value?"fullscreen_exit":"fullscreen",class:"large-screen",onClick:e[0]||(e[0]=n=>r.value=!r.value),round:"",dense:""},null,8,["icon"]),s(f,{color:"primary",size:"sm","text-color":"white",icon:r.value?"fullscreen_exit":"fullscreen",class:"small-screen",onClick:e[1]||(e[1]=n=>r.value=!r.value),round:"",dense:""},null,8,["icon"])]),_:1})]),default:c(()=>[(m(!0),C(J,null,A(a.value.photos,n=>(m(),g(E,{key:n.id,name:n.id,"img-src":S(X)+"/public/products/"+n.photo,"img-class":"carousel-photo"},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","fullscreen"]),t("div",re,[t("div",ce,x(a.value.name),1),t("div",ue,x(q(a.value.price)),1),t("div",{class:"text-subtitle1 text-grey-8 text-justify",innerHTML:j(a.value.description)},null,8,de)])]),s(K,{class:"col-md-3 col-xs-12 q-mx-sm q-my-xl q-pa-lg",style:{"max-width":"270px","max-height":"300px"},flat:"",bordered:""},{default:c(()=>[me,t("div",pe,"Stok : "+x(a.value.stock),1),t("div",ve,[t("div",fe,[s(L,{name:"shopping_cart",size:"32px"})]),t("div",he,[s(f,{color:"primary",icon:"remove",onClick:B,dense:"",flat:""})]),t("div",ye,[G(t("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=n=>o.value.quantity=n),max:a.value.stock,class:"no-arrows",onInput:V,style:{width:"32px"}},null,40,ge),[[H,o.value.quantity,void 0,{number:!0}]])]),t("div",xe,[s(f,{color:"primary",icon:"add",onClick:T,dense:"",flat:""})])]),S(Y)?(m(),g(f,{key:0,color:"primary",label:"Tambahkan ke keranjang",class:"q-my-md",onClick:N,loading:y.value,disable:y.value,"no-caps":""},{loading:c(()=>[s(O)]),_:1},8,["loading","disable"])):(m(),C("div",_e,[k(" Kamu harus "),s(P,{to:{name:"login"},class:"link text-primary"},{default:c(()=>[k("Masuk")]),_:1}),k(" terlebih dulu untuk dapat membuat pesanan! ")])),t("div",ke,x(q(I.value)),1),be]),_:1})])]),_:1}))}}};export{Pe as default};
