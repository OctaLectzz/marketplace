import{r as l,j as k,k as x,m as V,n as b,p as m,q as t,z as a,aP as n,Q as q,t as g}from"./index.30dd2348.js";import{Q as U}from"./QSpinnerGears.3a9ff54e.js";import{Q}from"./QForm.550ba64a.js";import{Q as S}from"./QPage.b9e58bdc.js";import{u as P}from"./use-quasar.67b6ac9a.js";import{u as E}from"./auth-store.2c60703d.js";import{u as C}from"./user-store.f67a660c.js";import"./axios.66ae61ea.js";const N=a("div",{class:"text-h5 text-center q-mx-lg"},"Memulai untuk jual beli dengan cara terbaru",-1),B={class:"row justify-between"},K={class:"col-5"},L={class:"q-my-xs"},j=a("label",{for:"email"},"Username",-1),I={class:"col-5"},M={class:"q-my-xs"},z=a("label",{for:"email"},"Nama",-1),F={class:"q-my-xs"},R=a("label",{for:"email"},"Email",-1),A={class:"q-my-xs"},D=a("label",{for:"password"},"Kata Sandi",-1),G={class:"q-my-xs"},T=a("label",{for:"confirm_password"},"Konfirmasi Kata Sandi",-1),$={class:"q-mt-sm text-center",style:{"font-size":"12px"}},H={class:"text-bold cursor-pointer"},oe={__name:"RegisterPage",setup(J){const f=P(),c=l(""),p=l(""),v=l(""),d=l(""),_=l(""),r=l([]),h=async()=>{try{const e=await C().all();r.value=e.data.data}catch(e){console.error("Error fetching data:",e)}};k(()=>{h()});const i=l({username:[e=>!!e||"Username harus diisi",e=>e.length>=6||"Username minimal 6 karakter",e=>e.length<=20||"Username maksimal 20 karakter",e=>typeof e=="string"&&r.value?!r.value.some(s=>s.username.toLowerCase()===e.toLowerCase())||"Username sudah ada":!0],name:[e=>!!e||"Nama harus diisi",e=>e.length<=50||"Nama maksimal 50 karakter"],email:[e=>!!e||"Email harus diisi",e=>/.+@.+/.test(e)||"Email tidak valid",e=>typeof e=="string"&&r.value?!r.value.some(s=>s.email.toLowerCase()===e.toLowerCase())||"Email sudah ada":!0],password:[e=>!!e||"Password harus diisi",e=>e.length>=8||"Password minimal 8 karakter"],confirm_password:[e=>!!e||"Konfirmasi Password harus diisi",e=>e===d.value||"Password tidak sama"]}),u=l(!1),w=async()=>{u.value=!0;try{const e=await E().register(c.value,p.value,v.value,d.value,_.value);localStorage.setItem("token",e.data.data.token),localStorage.setItem("role",e.data.data.user.role),f.notify({message:"Register Berhasil",icon:"check",color:"positive"}),window.location.reload()}catch(e){console.error("Error submitting form:",e),f.notify({message:e.response.data.message||"Format Email dan Password masih salah",icon:"warning",color:"negative"})}u.value=!1};return(e,s)=>{const y=x("router-link");return V(),b(S,{class:"q-my-xl",style:{"max-width":"500px",margin:"auto"}},{default:m(()=>[N,t(Q,{onSubmit:w,class:"q-my-lg"},{default:m(()=>[a("div",B,[a("div",K,[a("div",L,[j,t(n,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=o=>c.value=o),type:"text",id:"username",rules:i.value.username,outlined:"",dense:""},null,8,["modelValue","rules"])])]),a("div",I,[a("div",M,[z,t(n,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=o=>p.value=o),id:"name",rules:i.value.name,outlined:"",dense:""},null,8,["modelValue","rules"])])])]),a("div",F,[R,t(n,{modelValue:v.value,"onUpdate:modelValue":s[2]||(s[2]=o=>v.value=o),type:"email",id:"email",rules:i.value.email,outlined:"",dense:""},null,8,["modelValue","rules"])]),a("div",A,[D,t(n,{modelValue:d.value,"onUpdate:modelValue":s[3]||(s[3]=o=>d.value=o),type:"password",id:"password",rules:i.value.password,outlined:"",dense:""},null,8,["modelValue","rules"])]),a("div",G,[T,t(n,{modelValue:_.value,"onUpdate:modelValue":s[4]||(s[4]=o=>_.value=o),type:"password",id:"confirm_password",rules:i.value.confirm_password,outlined:"",dense:""},null,8,["modelValue","rules"])]),t(q,{type:"submit",color:"primary",label:"Daftar Sekarang",class:"full-width q-mt-sm",loading:u.value,disable:u.value,"no-caps":""},{loading:m(()=>[t(U)]),_:1},8,["loading","disable"]),a("div",$,[a("div",H,[g(" Sudah mempunyai akun? "),t(y,{to:{name:"login"},class:"link text-primary"},{default:m(()=>[g("Masuk")]),_:1})])])]),_:1})]),_:1})}}};export{oe as default};
