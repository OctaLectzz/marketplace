import{Q as c}from"./QSkeleton.72d58935.js";import{c as j,d as q,f as z,G as T,aR as V,r as u,j as $,aS as w,m as h,x as g,z as e,q as s,F as k,p as y,D as b,Q as p,A as E,aT as F,aE as I,aD as M,n as P,v as R}from"./index.3411a222.js";import{a as G,Q as L}from"./QCarousel.f9e590ec.js";import{Q as N}from"./QSpinnerGears.11fcd29c.js";import{u as U}from"./use-quasar.a53b7e3f.js";import{url as A}from"./axios.7b547941.js";import{u as H}from"./product-store.b7a4d6b4.js";import{u as J}from"./cart-store.8863e221.js";import"./touch.9135741d.js";import"./selection.3ca1e304.js";import"./use-fullscreen.7b6777f7.js";var K=j({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:i=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(i)},offset:{type:Array,default:()=>[18,18],validator:i=>i.length===2}},setup(i,{slots:v}){const d=q(()=>`q-carousel__control absolute absolute-${i.position}`),m=q(()=>({margin:`${i.offset[1]}px ${i.offset[0]}px`}));return()=>z("div",{class:d.value,style:m.value},T(v.default))}});const O={key:0,class:"q-py-lg"},W={class:"row justify-between"},X={class:"col-md-8 col-xs-12 q-mx-sm"},Y={class:"q-my-sm"},Z={class:"col-md-3 col-xs-12 q-mx-sm q-my-xl"},ee={class:"row items-center q-my-sm"},se={class:"col-md-2 col-xs-1 q-mx-sm"},te={class:"col-md-2 col-xs-1"},oe={class:"col-md-2 col-xs-1"},ae={class:"col-md-2 col-xs-1"},le={key:1,class:"q-py-lg"},ie={class:"row justify-between"},re={class:"col-md-8 col-xs-12 q-mx-sm"},ne={class:"q-my-sm"},ce={class:"text-h4 text-bold",style:{"letter-spacing":"0.01px"}},ue={class:"text-h6 text-bold q-mb-md",style:{color:"#ff7158"}},de=["innerHTML"],me={class:"col-md-3 col-xs-12 q-mx-sm q-my-xl"},pe={class:"row items-center q-my-sm"},ve={class:"col-md-2 col-sm-1 col-xs-2 q-mx-sm"},fe={class:"col-md-2 col-sm-1 col-xs-2"},he={class:"col-md-2 col-sm-1 col-xs-2"},ye={class:"col-md-2 col-sm-1 col-xs-2"},De={__name:"ShowProductPage",setup(i){const v=U(),d=V(),m=u(!0),_=u(null),r=u(!1),n=u({}),x=async a=>{m.value=!0;try{const t=await H().show(a);n.value=t.data.data,l.value.product_id=t.data.data.id,n.value.photos&&n.value.photos.length&&(_.value=n.value.photos[0].id)}catch(t){console.error("Error fetching data:",t)}m.value=!1};$(()=>{x(d.params.slug)}),w(()=>{d.params.slug&&x(d.params.slug)});const Q=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),C=a=>a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>"):"",l=u({product_id:null,quantity:1}),f=u(!1),B=()=>{l.value.quantity++},S=()=>{l.value.quantity>1&&l.value.quantity--};w(()=>{l.value.quantity<1&&(l.value.quantity=1)});const D=async()=>{f.value=!0;try{await J().create(l.value),v.notify({message:"Berhasil memasukkan produk ke keranjang",icon:"check",color:"positive"})}catch(a){console.error("Error submitting form:",a),v.notify({message:a.response.data.message||"Gagal memasukkan produk ke keranjang",icon:"warning",color:"negative"})}f.value=!1};return(a,t)=>m.value?(h(),g("div",O,[e("div",W,[e("div",X,[s(c,{width:"100%",height:"400px"}),e("div",Y,[s(c,{width:"70%",height:"50px",class:"q-my-xs"}),s(c,{width:"30%",class:"q-my-xs"}),s(c,{width:"100%",height:"500px",class:"q-my-lg"})])]),e("div",Z,[e("div",ee,[e("div",se,[s(k,{name:"shopping_cart",size:"32px"})]),e("div",te,[s(c,{type:"QBtn",size:"32px"})]),e("div",oe,[s(c,{type:"QBtn",size:"32px"})]),e("div",ae,[s(c,{type:"QBtn",size:"32px"})])]),s(c,{type:"QBtn",width:"92%"})])])])):(h(),g("div",le,[e("div",ie,[e("div",re,[s(G,{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=o=>_.value=o),fullscreen:r.value,"onUpdate:fullscreen":t[3]||(t[3]=o=>r.value=o),class:"carousel-products",infinite:"",navigation:"",swipeable:"",animated:"",arrows:""},{control:y(()=>[s(K,{position:"bottom-right",offset:[18,18]},{default:y(()=>[s(p,{color:"primary","text-color":"white",icon:r.value?"fullscreen_exit":"fullscreen",class:"large-screen",onClick:t[0]||(t[0]=o=>r.value=!r.value),round:"",dense:""},null,8,["icon"]),s(p,{color:"primary",size:"sm","text-color":"white",icon:r.value?"fullscreen_exit":"fullscreen",class:"small-screen",onClick:t[1]||(t[1]=o=>r.value=!r.value),round:"",dense:""},null,8,["icon"])]),_:1})]),default:y(()=>[(h(!0),g(I,null,M(n.value.photos,o=>(h(),P(L,{key:o.id,name:o.id,"img-src":R(A)+"/public/products/"+o.photo,"img-class":"carousel-photo"},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","fullscreen"]),e("div",ne,[e("div",ce,b(n.value.name),1),e("div",ue,b(Q(n.value.price)),1),e("div",{class:"text-subtitle1 text-grey-8 text-justify",innerHTML:C(n.value.description)},null,8,de)])]),e("div",me,[e("div",pe,[e("div",ve,[s(k,{name:"shopping_cart",size:"32px"})]),e("div",fe,[s(p,{color:"primary",icon:"remove",onClick:S,dense:"",flat:""})]),e("div",he,[E(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.quantity=o),type:"number",class:"no-arrows",style:{width:"32px"}},null,512),[[F,l.value.quantity]])]),e("div",ye,[s(p,{color:"primary",icon:"add",onClick:B,dense:"",flat:""})])]),s(p,{color:"primary",label:"Tambahkan ke keranjang",onClick:D,loading:f.value,disable:f.value,"no-caps":""},{loading:y(()=>[s(N)]),_:1},8,["loading","disable"])])])]))}};export{De as default};
