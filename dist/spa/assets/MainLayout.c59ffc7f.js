import{Q as U,a as G,b as J}from"./QHeader.9c4ccebb.js";import{c as le,i as se,e as N,r as F,a as re,d as z,w as B,o as ne,h as ie,f as E,g as ue,l as ce,u as me,j as de,k as W,m as l,n as s,p as e,q as t,s as K,t as g,v as u,x as D,Q as C,y as A,z as r,A as _,B as P,C as X,D as T,K as fe,E as ve,F as pe}from"./index.3411a222.js";import{Q as H}from"./QSkeleton.72d58935.js";import{Q as j}from"./QBtnDropdown.774f53b6.js";import{Q as k}from"./QItemLabel.4cdf02e7.js";import{Q as q,a as Q}from"./QItem.3b7e9927.js";import{Q as Y}from"./QList.51f87a8a.js";import{Q as ge,a as _e,b as he}from"./QLayout.713e580a.js";import{Q as ye,a as L}from"./QTabs.1c334d24.js";import{C as h}from"./ClosePopup.5a4db590.js";import{u as xe}from"./use-quasar.a53b7e3f.js";import{token as I,url as V}from"./axios.7b547941.js";import{u as be}from"./auth-store.8e49de40.js";import{u as ke}from"./user-store.70fb05d9.js";import"./QBtnGroup.37460e18.js";import"./QMenu.2d1a1d67.js";import"./selection.3ca1e304.js";import"./rtl.276c3f1b.js";var qe=le({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(i,{slots:S,emit:R}){const{proxy:{$q:d}}=ue(),a=se(ce,N);if(a===N)return console.error("QFooter needs to be child of QLayout"),N;const m=F(parseInt(i.heightHint,10)),y=F(!0),f=F(re.value===!0||a.isContainer.value===!0?0:window.innerHeight),w=z(()=>i.reveal===!0||a.view.value.indexOf("F")!==-1||d.platform.is.ios&&a.isContainer.value===!0),c=z(()=>a.isContainer.value===!0?a.containerHeight.value:f.value),n=z(()=>{if(i.modelValue!==!0)return 0;if(w.value===!0)return y.value===!0?m.value:0;const o=a.scroll.value.position+c.value+m.value-a.height.value;return o>0?o:0}),b=z(()=>i.modelValue!==!0||w.value===!0&&y.value!==!0),M=z(()=>i.modelValue===!0&&b.value===!0&&i.reveal===!0),v=z(()=>"q-footer q-layout__section--marginal "+(w.value===!0?"fixed":"absolute")+"-bottom"+(i.bordered===!0?" q-footer--bordered":"")+(b.value===!0?" q-footer--hidden":"")+(i.modelValue!==!0?" q-layout--prevent-focus"+(w.value!==!0?" hidden":""):"")),Z=z(()=>{const o=a.rows.value.bottom,p={};return o[0]==="l"&&a.left.space===!0&&(p[d.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),o[2]==="r"&&a.right.space===!0&&(p[d.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),p});function x(o,p){a.update("footer",o,p)}function $(o,p){o.value!==p&&(o.value=p)}function ee({height:o}){$(m,o),x("size",o)}function te(){if(i.reveal!==!0)return;const{direction:o,position:p,inflectionPoint:oe}=a.scroll.value;$(y,o==="up"||p-oe<100||a.height.value-c.value-p-m.value<300)}function ae(o){M.value===!0&&$(y,!0),R("focusin",o)}B(()=>i.modelValue,o=>{x("space",o),$(y,!0),a.animate()}),B(n,o=>{x("offset",o)}),B(()=>i.reveal,o=>{o===!1&&$(y,i.modelValue)}),B(y,o=>{a.animate(),R("reveal",o)}),B([m,a.scroll,a.height],te),B(()=>d.screen.height,o=>{a.isContainer.value!==!0&&$(f,o)});const O={};return a.instances.footer=O,i.modelValue===!0&&x("size",m.value),x("space",i.modelValue),x("offset",n.value),ne(()=>{a.instances.footer===O&&(a.instances.footer=void 0,x("size",0),x("offset",0),x("space",!1))}),()=>{const o=ie(S.default,[E(ge,{debounce:0,onResize:ee})]);return i.elevated===!0&&o.push(E("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),E("footer",{class:v.value,style:Z.value,onFocusin:ae},o)}}});const Qe=r("img",{src:"/img/logo.svg",width:"50",class:"q-pa-xs"},null,-1),we={key:0},ze={key:1},Ce=["src"],Se={class:"row no-wrap q-pa-md"},$e={class:"column"},Be={class:"column items-center"},Ae=["src"],Le={class:"nav-profile text-subtitle1 text-grey-8 q-mt-sm"},Ve={class:"nav-profile text-subtitle2 text-bold q-mb-md q-mt-xs",style:{"max-width":"150px"}},Pe=r("footer",{class:"bg-grey-3 q-py-lg"},[r("div",{class:"text-body1 text-center text-grey-8"},"2024 Copyright Store. All Rights Reserved.")],-1),He={class:"small-screen"},Ie=r("img",{src:"/img/logo.svg",width:"50",class:"q-pa-xs q-mx-md"},null,-1),Fe={key:0},Re={key:1},De=["src"],Te={class:"row no-wrap q-pa-md"},je={class:"column"},Me={class:"column items-center"},Ne=["src"],Ee={class:"nav-profile text-subtitle1 text-grey-8 q-mt-sm"},Ke={class:"nav-profile text-subtitle2 text-bold q-mb-md q-mt-xs",style:{"max-width":"150px"}},Oe=["src"],Ue=["src"],dt={__name:"MainLayout",setup(i){const S=xe(),R=me(),d=localStorage.getItem("role"),a=F({}),m=F(!0),y=async()=>{try{const c=await ke().profile();a.value=c.data.data,m.value=!1}catch(c){console.error("Error fetching data:",c),localStorage.removeItem("token"),localStorage.removeItem("role"),S.notify({message:"Sesi Habis",icon:"warning",color:"negative"}),window.location.reload()}};de(()=>{I&&y()});const f=(c,n)=>{R.push({name:c,params:n})},w=async()=>{S.dialog({title:"Logout",message:"Apakah anda yakin?",cancel:!0,persistent:!0}).onOk(async()=>{try{await be().logout(),S.notify({message:"Logout Berhasil",icon:"check",color:"positive"})}catch(c){console.error("Error submitting form:",c),S.notify({message:c.response.data.message||"Logout Gagal",icon:"warning",color:"negative"})}})};return(c,n)=>{const b=W("router-link"),M=W("router-view");return l(),s(_e,{view:"lHh Lpr lFf"},{default:e(()=>[t(J,{class:"large-screen bg-white q-px-lg"},{default:e(()=>[t(U,{class:"text-primary q-my-sm"},{default:e(()=>[t(b,{to:{name:"home"}},{default:e(()=>[Qe]),_:1}),t(G,{class:"q-py-sm q-mx-lg",style:{"font-size":"16px"}},{default:e(()=>[t(b,{to:{name:"home"},class:K(["nav-link q-mx-sm text-bold",c.$route.name==="home"?"active-tab":""])},{default:e(()=>[g("Beranda")]),_:1},8,["class"]),t(b,{to:{name:"home.categories"},class:K(["nav-link q-mx-sm text-bold",c.$route.name==="home.categories"?"active-tab":""])},{default:e(()=>[g("Kategori")]),_:1},8,["class"]),t(b,{to:{name:"home.explore"},class:K(["nav-link q-mx-sm text-bold",c.$route.name==="home.explore"?"active-tab":""])},{default:e(()=>[g("Jelajahi")]),_:1},8,["class"])]),_:1}),u(I)?(l(),D("div",ze,[t(C,{to:{name:"home.cart"},color:"primary",size:"18px",class:"q-mx-lg",icon:"shopping_cart",flat:"",round:""}),m.value?(l(),s(j,{key:0,color:"primary",class:"q-mx-xs",rounded:"",dense:"",flat:"",push:"",glossy:"",split:""},{label:e(()=>[t(H,{type:"QAvatar",size:"26px"})]),_:1})):(l(),s(j,{key:1,to:{name:"home.profile"},color:"primary",class:"q-mx-xs",rounded:"",dense:"",flat:"",push:"",glossy:"",split:""},{label:e(()=>[m.value?(l(),s(H,{key:0,type:"QAvatar",size:"26px"})):(l(),s(A,{key:1,size:"26px"},{default:e(()=>[r("img",{src:u(V)+"/public/avatars/"+a.value.avatar},null,8,Ce)]),_:1}))]),default:e(()=>[r("div",Se,[r("div",$e,[t(Y,{class:"nav-profile"},{default:e(()=>[u(d)==="Admin"||u(d)==="Mitra"?_((l(),s(q,{key:0,onClick:n[0]||(n[0]=v=>f("dashboard.home")),clickable:""},{default:e(()=>[t(Q,null,{default:e(()=>[t(k,null,{default:e(()=>[g("Dasbor")]),_:1})]),_:1})]),_:1})),[[h]]):P("",!0),_((l(),s(q,{onClick:n[1]||(n[1]=v=>f("home.profile")),clickable:""},{default:e(()=>[t(Q,null,{default:e(()=>[t(k,null,{default:e(()=>[g("Profil")]),_:1})]),_:1})]),_:1})),[[h]]),u(d)==="Customer"?_((l(),s(q,{key:1,onClick:n[2]||(n[2]=v=>f("home.order")),clickable:""},{default:e(()=>[t(Q,null,{default:e(()=>[t(k,null,{default:e(()=>[g("Pesanan Saya")]),_:1})]),_:1})]),_:1})),[[h]]):P("",!0),_((l(),s(q,{onClick:n[3]||(n[3]=v=>f("home.setting")),clickable:""},{default:e(()=>[t(Q,null,{default:e(()=>[t(k,null,{default:e(()=>[g("Pengaturan")]),_:1})]),_:1})]),_:1})),[[h]])]),_:1})]),t(X,{vertical:"",inset:"",class:"q-mx-md"}),r("div",Be,[t(A,{size:"72px",class:"q-mx-md"},{default:e(()=>[r("img",{src:u(V)+"/public/avatars/"+a.value.avatar},null,8,Ae)]),_:1}),r("div",Le,T(a.value.username),1),r("div",Ve,T(a.value.name),1),_(t(C,{color:"primary",label:"Logout",push:"",size:"sm",onClick:w},null,512),[[h]])])])]),_:1}))])):(l(),D("div",we,[t(C,{to:{name:"register"},color:"primary",label:"Sign Up",class:"q-mx-xs","no-caps":"",flat:""}),t(C,{to:{name:"login"},color:"primary",label:"Sign In",class:"q-mx-xs","no-caps":""})]))]),_:1})]),_:1}),t(he,{class:"q-mb-lg container",style:{"min-height":"100vh"}},{default:e(()=>[t(M,null,{default:e(({Component:v})=>[(l(),s(fe,null,[(l(),s(ve(v)))],1024))]),_:1})]),_:1}),Pe,r("div",He,[t(J,{class:"bg-white q-pt-sm"},{default:e(()=>[t(U,{class:"text-primary"},{default:e(()=>[t(G,null,{default:e(()=>[t(b,{to:{name:"home"}},{default:e(()=>[Ie]),_:1})]),_:1}),u(I)?(l(),D("div",Re,[t(C,{to:{name:"home.cart"},color:"primary",size:"15px",class:"q-mx-lg",icon:"shopping_cart",flat:"",round:""}),m.value?(l(),s(j,{key:0,color:"primary",class:"q-mx-xs",rounded:"",dense:"",flat:"",push:"",glossy:"",split:""},{label:e(()=>[t(H,{type:"QAvatar",size:"26px"})]),_:1})):(l(),s(j,{key:1,to:{name:"home.profile"},color:"primary",class:"q-mx-xs",rounded:"",dense:"",flat:"",push:"",glossy:"",split:""},{label:e(()=>[m.value?(l(),s(H,{key:0,type:"QAvatar",size:"26px"})):(l(),s(A,{key:1,size:"26px"},{default:e(()=>[r("img",{src:u(V)+"/public/avatars/"+a.value.avatar},null,8,De)]),_:1}))]),default:e(()=>[r("div",Te,[r("div",je,[t(Y,{class:"nav-profile"},{default:e(()=>[u(d)==="Admin"||u(d)==="Mitra"?_((l(),s(q,{key:0,onClick:n[4]||(n[4]=v=>f("dashboard.home")),clickable:""},{default:e(()=>[t(Q,null,{default:e(()=>[t(k,null,{default:e(()=>[g("Dasbor")]),_:1})]),_:1})]),_:1})),[[h]]):P("",!0),_((l(),s(q,{onClick:n[5]||(n[5]=v=>f("home.profile")),clickable:""},{default:e(()=>[t(Q,null,{default:e(()=>[t(k,null,{default:e(()=>[g("Profil")]),_:1})]),_:1})]),_:1})),[[h]]),u(d)==="Customer"?_((l(),s(q,{key:1,onClick:n[6]||(n[6]=v=>f("home.order")),clickable:""},{default:e(()=>[t(Q,null,{default:e(()=>[t(k,null,{default:e(()=>[g("Pesanan Saya")]),_:1})]),_:1})]),_:1})),[[h]]):P("",!0),_((l(),s(q,{onClick:n[7]||(n[7]=v=>f("home.setting")),clickable:""},{default:e(()=>[t(Q,null,{default:e(()=>[t(k,null,{default:e(()=>[g("Pengaturan")]),_:1})]),_:1})]),_:1})),[[h]])]),_:1})]),t(X,{vertical:"",inset:"",class:"q-mx-md"}),r("div",Me,[t(A,{size:"72px",class:"q-mx-md"},{default:e(()=>[r("img",{src:u(V)+"/public/avatars/"+a.value.avatar},null,8,Ne)]),_:1}),r("div",Ee,T(a.value.username),1),r("div",Ke,T(a.value.name),1),_(t(C,{color:"primary",label:"Logout",push:"",size:"sm",onClick:w},null,512),[[h]])])])]),_:1}))])):(l(),D("div",Fe,[t(C,{to:{name:"register"},color:"primary",size:"sm",label:"Daftar",class:"q-mx-xs",rounded:""})]))]),_:1})]),_:1}),t(qe,{elevated:""},{default:e(()=>[t(ye,{class:"bg-primary",align:"justify"},{default:e(()=>[t(L,{name:"home",icon:"home",to:{name:"home"}}),t(L,{name:"explore",icon:"search",to:{name:"home.explore"}}),u(I)?(l(),s(L,{key:0,name:"order",class:"larger-tab",to:{name:"home.order"}},{default:e(()=>[r("div",null,[t(pe,{name:"payments",color:"light",size:"30px"})])]),_:1})):P("",!0),t(L,{name:"category",icon:"category",to:{name:"home.categories"}}),u(I)?(l(),s(L,{key:2,name:"profile",to:{name:"home.profile"}},{default:e(()=>[m.value?(l(),s(H,{key:0,type:"QAvatar",size:"20px"})):(l(),s(A,{key:1,size:"20px"},{default:e(()=>[r("img",{src:u(V)+"/public/avatars/"+a.value.avatar},null,8,Ue)]),_:1}))]),_:1})):(l(),s(L,{key:1,name:"profile",to:{name:"login"}},{default:e(()=>[t(A,{size:"20px"},{default:e(()=>[r("img",{src:u(V)+"/public/avatars/user-profile-default.jpg"},null,8,Oe)]),_:1})]),_:1}))]),_:1})]),_:1})])]),_:1})}}};export{dt as default};
