import{r as p,d as X,m as s,x as o,q as r,p as t,a_ as M,b0 as N,A as F,Q as v,C as A,z as i,aQ as W,aE as I,aD as $,b2 as Y,u as Z,j as ee,n as m,bl as te,t as d,D as a,F as U,B as l,v as B,a$ as R,s as se,bm as ae}from"./index.3411a222.js";import{Q as L}from"./QTooltip.fba44378.js";import{Q as c,a as re}from"./QTable.0e33284a.js";import{Q as g}from"./QBadge.64db8ae1.js";import{Q as j}from"./QImg.602e0d0f.js";import{Q as H}from"./QItemLabel.4cdf02e7.js";import{Q as ie}from"./QList.51f87a8a.js";import{Q as oe}from"./QPage.47df145d.js";import{u as J}from"./use-quasar.a53b7e3f.js";import{url as O}from"./axios.7b547941.js";import{u as E}from"./transaction-store.4971fc28.js";import{Q as le}from"./QSpace.b7b875dd.js";import{Q as ne}from"./QSpinnerHourglass.f1de36e7.js";import{Q as de}from"./QForm.f0266572.js";import{C as G}from"./ClosePopup.5a4db590.js";import"./QMenu.2d1a1d67.js";import"./selection.3ca1e304.js";import"./QSelect.62773709.js";import"./QItem.3b7e9927.js";import"./rtl.276c3f1b.js";import"./format.b9446fb2.js";import"./use-fullscreen.7b6777f7.js";const ue=i("div",{class:"text-h6"},"Edit Transaksi",-1),ce={class:"row justify-center"},_e={class:"col-10 q-ma-sm"},me=i("div",{class:"text-bold"},"No Resi :",-1),he={class:"col-10 q-ma-sm"},ge=i("div",{class:"text-bold"},"Status Pengiriman :",-1),K={__name:"EditTransaction",props:["item"],emits:["edited"],setup(P,{emit:q}){const z=J(),{item:x}=P,S=q,y=p({id:x.id,resi:x.resi,shipping_status:x.shipping_status}),V=[{value:0,label:"Belum Dibayar"},{value:1,label:"Sedang Dikemas"},{value:2,label:"Sedang Dikirim"},{value:3,label:"Selesai"},{value:4,label:"Dibatalkan"}],T=_=>{switch(_){case 0:return"grey";case 1:return"warning";case 2:return"green";case 3:return"blue";case 4:return"red";default:return{}}},k=p(!1),Q=X(()=>k.value),D=async()=>{k.value=!0;try{await E().updateshipping(y.value),z.notify({message:"Transaksi berhasil diedit",icon:"check",color:"positive"}),S("edited")}catch(_){console.error("Error submitting form:",_),z.notify({message:_.response.data.message||"Transaksi gagal diedit, Silahkan coba lagi nanti",icon:"warning",color:"negative"})}k.value=!1};return(_,C)=>(s(),o("div",null,[r(de,{onSubmit:D},{default:t(()=>[r(M,{style:{"min-width":"400px"}},{default:t(()=>[r(N,{class:"row items-center q-py-sm"},{default:t(()=>[ue,r(le),F(r(v,{icon:"close",flat:"",round:"",dense:""},null,512),[[G]])]),_:1}),r(A),r(N,{class:"scroll",style:{"max-height":"77vh"}},{default:t(()=>[i("div",ce,[i("div",_e,[me,r(W,{modelValue:y.value.resi,"onUpdate:modelValue":C[0]||(C[0]=f=>y.value.resi=f),label:"No Resi",class:"q-my-xs",dense:"",outlined:"",autofocus:""},null,8,["modelValue"])]),i("div",he,[ge,(s(),o(I,null,$(V,f=>r(v,{key:f.value,color:T(f.value),label:f.label,class:"q-ma-xs",onClick:b=>y.value.shipping_status=f.value,flat:y.value.shipping_status!=f.value},null,8,["color","label","onClick","flat"])),64))])])]),_:1}),r(A),r(Y,{align:"right",class:"text-primary"},{default:t(()=>[F(r(v,{label:"Batal",color:"primary",flat:""},null,512),[[G]]),r(v,{type:"submit",label:"Edit",color:"primary",loading:k.value,disable:Q.value},{loading:t(()=>[r(ne,{class:"on-center"})]),_:1},8,["loading","disable"])]),_:1})]),_:1})]),_:1})]))}},ve={class:"text-body2 text-bold text-center q-pa-md"},fe={dense:"",square:""},ye={dense:"",square:""},we={class:"bg-yellow-3 q-pa-sm",style:{"border-radius":"20px"}},be={class:"text-yellow-10 text-center"},pe={dense:"",square:""},xe={dense:"",square:""},ke={dense:"",square:""},qe={class:"text-bold"},Se={dense:"",square:""},Qe={class:"text-bold"},De={dense:"",square:""},Ce={class:"text-bold text-red"},ze={dense:"",square:""},Ve={class:"text-bold text-red"},Ie={dense:"",square:""},$e={class:"text-bold text-red"},Te={dense:"",square:""},Be={class:"text-bold"},Ee={dense:"",square:""},Pe={key:0,class:"q-mr-xs"},Ne={key:1,class:"q-mr-xs"},Fe={key:2,class:"q-mr-xs"},Ae={key:3,class:"q-mr-xs"},Ue={key:0},Re={key:1},Le={dense:"",square:""},je={key:0,class:"q-mr-xs"},He={key:1,class:"q-mr-xs"},Oe={key:2,class:"q-mr-xs"},Ge={key:3,class:"q-mr-xs"},Ke={key:0},Me={key:1},We={class:"text-bold text-grey-7 q-mt-md"},Je={side:""},Xe={key:0,dense:"",square:""},Ye={key:1,dense:"",square:""},Ze={class:"bg-yellow-3 q-pa-xs q-my-sm",style:{"max-width":"250px","border-radius":"20px"}},et={class:"text-yellow-10 text-center"},tt={key:2,dense:"",square:""},st={key:3,dense:"",square:""},at={key:4,dense:"",square:""},rt={class:"text-bold"},it={key:5,dense:"",square:""},ot={class:"text-bold"},lt={key:6,dense:"",square:""},nt={class:"text-bold text-red"},dt={key:7,dense:"",square:""},ut={class:"text-bold text-red"},ct={key:8,dense:"",square:""},_t={class:"text-bold text-red"},mt={key:9,dense:"",square:""},ht={class:"text-bold"},gt={key:10,dense:"",square:""},vt={key:0,class:"q-mr-xs"},ft={key:1,class:"q-mr-xs"},yt={key:2,class:"q-mr-xs"},wt={key:3,class:"q-mr-xs"},bt={key:0},pt={key:1},xt={key:11,dense:"",square:""},kt={key:0,class:"q-mr-xs"},qt={key:1,class:"q-mr-xs"},St={key:2,class:"q-mr-xs"},Qt={key:3,class:"q-mr-xs"},Dt={key:0},Ct={key:1},zt={key:12},Yt={__name:"IndexTransaction",setup(P){const q=J(),z=Z(),x=p([]),S=async()=>{try{const u=await E().dashboard();x.value=u.data.data}catch(u){console.error("Error fetching data:",u),u.response.data.status==="failed"&&z.push("/notfound")}};ee(()=>{S()});const y=u=>{u.editItemDialog=!1,S()},V=u=>{q.dialog({title:"WARNING!!!",message:"Apakah Anda yakin ingin menghapus data ini?",cancel:!0,persistent:!0}).onOk(async()=>{try{await E().delete(u.id),q.notify({message:"Transaksi berhasil dihapus",icon:"check",color:"positive"}),S()}catch(h){console.error("Error submitting form:",h),q.notify({message:h.response.data.message||"Transaksi gagal dihapus",icon:"warning",color:"negative"})}})},T=x,k=[{name:"id",field:"id",label:"No",headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"action",field:"action",label:"Aksi",align:"center",headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"invoice",field:"invoice",label:"Invoice",align:"center",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"shipping_status",field:"shipping_status",label:"Status Pengiriman",align:"center",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"transaction_details",field:"transaction_details",label:"Produk",align:"left",sortable:!1,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"resi",field:"resi",label:"Resi",align:"center",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"buyer",field:"buyer",label:"Pembeli",align:"left",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"seller",field:"seller",label:"Penjual",align:"left",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"product_price",field:"product_price",label:"Total Harga Produk",align:"center",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"shipping_price",field:"shipping_price",label:"Ongkos Kirim",align:"center",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"total_price",field:"total_price",label:"Total Harga",align:"center",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"courier",field:"courier",label:"Kurir",align:"left",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"buyer_address",field:"buyer_address",label:"Alamat Pembeli",align:"left",sortable:!1,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"seller_address",field:"seller_address",label:"Alamat Penjual",align:"left",sortable:!1,headerStyle:"font-weight: bolder; font-size: 13px;"},{name:"note",field:"note",label:"Catatan",align:"left",sortable:!0,headerStyle:"font-weight: bolder; font-size: 13px;"}],Q=p("horizontal"),D=p(""),_=p(!1),C=p({}),f=u=>{u.toggleFullscreen()},b=u=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(u);return(u,h)=>(s(),m(oe,{class:"q-pa-sm"},{default:t(()=>[r(re,{class:"dashboard-table","table-header-class":"bg-grey-2",title:"Transaksi","row-key":"__index",rows:B(T),columns:k,"hide-header":_.value,grid:_.value,filter:D.value,pagination:C.value,"onUpdate:pagination":h[3]||(h[3]=e=>C.value=e),"rows-per-page-options":[10,20,30],separator:Q.value,"virtual-scroll":"",flat:"",bordered:"",dense:""},{"top-right":t(e=>[r(te,{modelValue:Q.value,"onUpdate:modelValue":h[0]||(h[0]=n=>Q.value=n),size:"xs",options:[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"},{label:"Cell",value:"cell"},{label:"None",value:"none"}],class:"q-mx-md",inline:""},null,8,["modelValue"]),r(v,{color:"primary",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:n=>f(e),flat:"",round:"",dense:""},{default:t(()=>[r(L,null,{default:t(()=>[d(a(e.inFullscreen?"Keluar Layar Penuh":"Beralih ke Layar Penuh"),1)]),_:2},1024)]),_:2},1032,["icon","onClick"]),r(v,{color:"primary",icon:_.value?"list":"grid_on",onClick:h[1]||(h[1]=n=>_.value=!_.value),class:"q-mr-sm",flat:"",round:"",dense:""},{default:t(()=>[r(L,null,{default:t(()=>[d(a(_.value?"List":"Grid"),1)]),_:1})]),_:1},8,["icon"]),r(W,{outlined:"",dense:"",debounce:"300",modelValue:D.value,"onUpdate:modelValue":h[2]||(h[2]=n=>D.value=n),placeholder:"Cari..."},{append:t(()=>[r(U,{name:"search"})]),_:1},8,["modelValue"])]),"no-data":t(()=>[i("div",ve,[r(U,{name:"warning_amber",size:"25px",class:"q-mx-sm"}),d(" Tidak ada data yang tersedia. ")])]),"body-cell-id":t(e=>[r(c,{props:e},{default:t(()=>[i("div",fe,a(e.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-invoice":t(e=>[r(c,{props:e},{default:t(()=>[i("div",ye,[i("div",we,[i("div",be,a(e.row.invoice),1)])])]),_:2},1032,["props"])]),"body-cell-shipping_status":t(e=>[r(c,{props:e},{default:t(()=>[i("div",pe,[e.row.shipping_status==0?(s(),m(g,{key:0,color:"grey"},{default:t(()=>[d("Belum Dibayar")]),_:1})):l("",!0),e.row.shipping_status==1?(s(),m(g,{key:1,color:"warning"},{default:t(()=>[d("Sedang Dikemas")]),_:1})):l("",!0),e.row.shipping_status==2?(s(),m(g,{key:2,color:"success"},{default:t(()=>[d("Sedang Dikirim")]),_:1})):l("",!0),e.row.shipping_status==3?(s(),m(g,{key:3,color:"blue"},{default:t(()=>[d("Selesai")]),_:1})):l("",!0),e.row.shipping_status==4?(s(),m(g,{key:4,color:"red"},{default:t(()=>[d("Dibatalkan")]),_:1})):l("",!0)])]),_:2},1032,["props"])]),"body-cell-transaction_details":t(e=>[r(c,{props:e},{default:t(()=>[i("div",xe,[(s(!0),o(I,null,$(e.row.transaction_details,n=>(s(),o("div",{key:n.id,class:"q-my-xs"},[r(j,{src:B(O)+"/public/products/"+n.product.photos[0].photo,ratio:1/1,class:"q-mx-sm",style:{width:"30px"}},null,8,["src"]),d(" "+a(n.product.name),1)]))),128))])]),_:2},1032,["props"])]),"body-cell-buyer":t(e=>[r(c,{props:e},{default:t(()=>[i("div",ke,[i("div",qe,a(e.row.user.name),1),i("div",null,a(e.row.user.username),1)])]),_:2},1032,["props"])]),"body-cell-seller":t(e=>[r(c,{props:e},{default:t(()=>[i("div",Se,[i("div",Qe,a(e.row.transaction_details[0].product.user.name),1),i("div",null,a(e.row.transaction_details[0].product.user.username),1)])]),_:2},1032,["props"])]),"body-cell-product_price":t(e=>[r(c,{props:e},{default:t(()=>[i("div",De,[i("div",Ce,a(b(e.row.product_price)),1)])]),_:2},1032,["props"])]),"body-cell-shipping_price":t(e=>[r(c,{props:e},{default:t(()=>[i("div",ze,[i("div",Ve,a(b(e.row.shipping_price)),1)])]),_:2},1032,["props"])]),"body-cell-total_price":t(e=>[r(c,{props:e},{default:t(()=>[i("div",Ie,[i("div",$e,a(b(e.row.total_price)),1)])]),_:2},1032,["props"])]),"body-cell-courier":t(e=>[r(c,{props:e},{default:t(()=>[i("div",Te,[i("div",Be,a(e.row.courier),1),i("div",null,a(e.row.shipping_description),1)])]),_:2},1032,["props"])]),"body-cell-buyer_address":t(e=>[r(c,{props:e},{default:t(()=>[i("div",Ee,[i("div",null,[e.row.user.village?(s(),o("span",Pe,a(e.row.user.village)+",",1)):l("",!0),e.row.user.district?(s(),o("span",Ne,a(e.row.user.district)+",",1)):l("",!0),e.row.user.regency?(s(),o("span",Fe,a(e.row.user.regency)+",",1)):l("",!0),e.row.user.province?(s(),o("span",Ae,a(e.row.user.province)+".",1)):l("",!0)]),e.row.user.address_one?(s(),o("div",Ue,a(e.row.user.address_one)+".",1)):l("",!0),e.row.user.address_two?(s(),o("div",Re,"("+a(e.row.user.address_two)+")",1)):l("",!0)])]),_:2},1032,["props"])]),"body-cell-seller_address":t(e=>[r(c,{props:e},{default:t(()=>[i("div",Le,[i("div",null,[e.row.transaction_details[0].product.user.village?(s(),o("span",je,a(e.row.transaction_details[0].product.user.village)+",",1)):l("",!0),e.row.transaction_details[0].product.user.district?(s(),o("span",He,a(e.row.transaction_details[0].product.user.district)+",",1)):l("",!0),e.row.transaction_details[0].product.user.regency?(s(),o("span",Oe,a(e.row.transaction_details[0].product.user.regency)+",",1)):l("",!0),e.row.transaction_details[0].product.user.province?(s(),o("span",Ge,a(e.row.transaction_details[0].product.user.province)+".",1)):l("",!0)]),e.row.transaction_details[0].product.user.address_one?(s(),o("div",Ke,a(e.row.transaction_details[0].product.user.address_one)+".",1)):l("",!0),e.row.transaction_details[0].product.user.address_two?(s(),o("div",Me,"("+a(e.row.transaction_details[0].product.user.address_two)+")",1)):l("",!0)])]),_:2},1032,["props"])]),"body-cell-action":t(e=>[r(c,{props:e},{default:t(()=>[r(v,{color:"warning",field:"edit",icon:"edit",class:"q-mx-xs",onClick:n=>e.row.editItemDialog=!0,dense:"",round:""},{default:t(()=>[r(R,{modelValue:e.row.editItemDialog,"onUpdate:modelValue":n=>e.row.editItemDialog=n,persistent:""},{default:t(()=>[r(K,{onEdited:n=>y(e.row),item:e.row},null,8,["onEdited","item"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["onClick"]),r(v,{color:"red",field:"delete",icon:"delete",class:"q-mx-xs",onClick:n=>V(e.row),dense:"",round:""},null,8,["onClick"])]),_:2},1032,["props"])]),item:t(e=>[i("div",{class:"q-pa-md col-xs-12 col-sm-6 col-md-6 col-lg-6 grid-style-transition",style:ae(e.selected?"transform: scale(0.95);":"")},[r(M,{class:"q-pa-md"},{default:t(()=>[r(ie,{dense:""},{default:t(()=>[(s(!0),o(I,null,$(e.cols,n=>(s(),o("div",{key:n.id},[i("div",We,[r(H,null,{default:t(()=>[d(a(n.label),1)]),_:2},1024)]),i("div",Je,[n.name==="id"?(s(),o("div",Xe,a(e.rowIndex+1),1)):n.name==="invoice"?(s(),o("div",Ye,[i("div",Ze,[i("div",et,a(e.row.invoice),1)])])):n.name==="shipping_status"?(s(),o("div",tt,[e.row.shipping_status==0?(s(),m(g,{key:0,color:"grey"},{default:t(()=>[d("Belum Dibayar")]),_:1})):l("",!0),e.row.shipping_status==1?(s(),m(g,{key:1,color:"warning"},{default:t(()=>[d("Sedang Dikemas")]),_:1})):l("",!0),e.row.shipping_status==2?(s(),m(g,{key:2,color:"success"},{default:t(()=>[d("Sedang Dikirim")]),_:1})):l("",!0),e.row.shipping_status==3?(s(),m(g,{key:3,color:"blue"},{default:t(()=>[d("Selesai")]),_:1})):l("",!0),e.row.shipping_status==4?(s(),m(g,{key:4,color:"red"},{default:t(()=>[d("Dibatalkan")]),_:1})):l("",!0)])):n.name==="transaction_details"?(s(),o("div",st,[(s(!0),o(I,null,$(e.row.transaction_details,w=>(s(),o("div",{key:w.id,class:"q-my-xs"},[r(j,{src:B(O)+"/public/products/"+w.product.photos[0].photo,ratio:1/1,class:"q-mx-sm",style:{width:"30px"}},null,8,["src"]),d(" "+a(w.product.name),1)]))),128))])):n.name==="buyer"?(s(),o("div",at,[i("div",rt,a(e.row.user.name),1),i("div",null,a(e.row.user.username),1)])):n.name==="seller"?(s(),o("div",it,[i("div",ot,a(e.row.transaction_details[0].product.user.name),1),i("div",null,a(e.row.transaction_details[0].product.user.username),1)])):n.name==="product_price"?(s(),o("div",lt,[i("div",nt,a(b(e.row.product_price)),1)])):n.name==="shipping_price"?(s(),o("div",dt,[i("div",ut,a(b(e.row.shipping_price)),1)])):n.name==="total_price"?(s(),o("div",ct,[i("div",_t,a(b(e.row.total_price)),1)])):n.name==="courier"?(s(),o("div",mt,[i("div",ht,a(e.row.courier),1),i("div",null,a(e.row.shipping_description),1)])):n.name==="buyer_address"?(s(),o("div",gt,[i("div",null,[e.row.user.village?(s(),o("span",vt,a(e.row.user.village)+",",1)):l("",!0),e.row.user.district?(s(),o("span",ft,a(e.row.user.district)+",",1)):l("",!0),e.row.user.regency?(s(),o("span",yt,a(e.row.user.regency)+",",1)):l("",!0),e.row.user.province?(s(),o("span",wt,a(e.row.user.province)+".",1)):l("",!0)]),e.row.user.address_one?(s(),o("div",bt,a(e.row.user.address_one)+".",1)):l("",!0),e.row.user.address_two?(s(),o("div",pt,"("+a(e.row.user.address_two)+")",1)):l("",!0)])):n.name==="seller_address"?(s(),o("div",xt,[i("div",null,[e.row.transaction_details[0].product.user.village?(s(),o("span",kt,a(e.row.transaction_details[0].product.user.village)+",",1)):l("",!0),e.row.transaction_details[0].product.user.district?(s(),o("span",qt,a(e.row.transaction_details[0].product.user.district)+",",1)):l("",!0),e.row.transaction_details[0].product.user.regency?(s(),o("span",St,a(e.row.transaction_details[0].product.user.regency)+",",1)):l("",!0),e.row.transaction_details[0].product.user.province?(s(),o("span",Qt,a(e.row.transaction_details[0].product.user.province)+".",1)):l("",!0)]),e.row.transaction_details[0].product.user.address_one?(s(),o("div",Dt,a(e.row.transaction_details[0].product.user.address_one)+".",1)):l("",!0),e.row.transaction_details[0].product.user.address_two?(s(),o("div",Ct,"("+a(e.row.transaction_details[0].product.user.address_two)+")",1)):l("",!0)])):n.name==="action"?(s(),o("div",zt,[r(v,{color:"warning",field:"edit",icon:"edit",class:"q-mx-xs",onClick:w=>e.row.editItemDialog=!0,dense:"",round:""},{default:t(()=>[r(R,{modelValue:e.row.editItemDialog,"onUpdate:modelValue":w=>e.row.editItemDialog=w,persistent:""},{default:t(()=>[r(K,{onEdited:w=>y(e.row),item:e.row},null,8,["onEdited","item"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["onClick"]),r(v,{color:"red",field:"delete",icon:"delete",class:"q-mx-xs",onClick:w=>V(e.row),dense:"",round:""},null,8,["onClick"])])):(s(),m(H,{key:13,caption:"",class:se(n.classes?n.classes:"")},{default:t(()=>[d(a(n.value),1)]),_:2},1032,["class"]))])]))),128))]),_:2},1024)]),_:2},1024)],4)]),_:1},8,["rows","hide-header","grid","filter","pagination","separator"])]),_:1}))}};export{Yt as default};
